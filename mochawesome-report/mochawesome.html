<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets\app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:25,&quot;tests&quot;:50,&quot;passes&quot;:50,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2020-05-24T08:25:37.989Z&quot;,&quot;end&quot;:&quot;2020-05-24T08:25:42.642Z&quot;,&quot;duration&quot;:4653,&quot;testsRegistered&quot;:50,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;f42845f9-3096-4b30-a00c-8cb455179463&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ed659c2d-5ef8-43e5-b44d-12f22cacaee1&quot;,&quot;title&quot;:&quot;Listener&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\1_listener.js&quot;,&quot;file&quot;:&quot;\\test\\1_listener.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Listener \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Listener.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18827d1c-831d-45fb-b62c-88d10c931e1c&quot;,&quot;parentUUID&quot;:&quot;ed659c2d-5ef8-43e5-b44d-12f22cacaee1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f4835cc1-ea9f-4473-8e07-fb0d19dd2c2c&quot;,&quot;title&quot;:&quot;Register/Login&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\1_listener.js&quot;,&quot;file&quot;:&quot;\\test\\1_listener.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should register a listener&quot;,&quot;fullTitle&quot;:&quot;Listener Register/Login it should register a listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/listener/register\&quot;)\n  .send({\n    userName: \&quot;Test\&quot;,\n    email: \&quot;mamadklashinkov@gmail.com\&quot;,\n    categories: [\&quot;11\&quot;, \&quot;1123\&quot;],\n    number: \&quot;+917428730894\&quot;,\n    test: \&quot;true\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;listenerDoc\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7f1c0c2-bf0f-4a34-a354-e520f253b962&quot;,&quot;parentUUID&quot;:&quot;f4835cc1-ea9f-4473-8e07-fb0d19dd2c2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should login the listener&quot;,&quot;fullTitle&quot;:&quot;Listener Register/Login it should login the listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/listener/auth\&quot;)\n  .send({\n    password: \&quot;0000\&quot;,\n    number: \&quot;+917428730894\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;listenerDoc\&quot;);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb7ff768-baca-438e-82b7-b6fb9f73fee1&quot;,&quot;parentUUID&quot;:&quot;f4835cc1-ea9f-4473-8e07-fb0d19dd2c2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should request the OTP&quot;,&quot;fullTitle&quot;:&quot;Listener Register/Login it should request the OTP&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/listener/request/otp\&quot;)\n  .send({\n    number: \&quot;+917428730894\&quot;,\n    test: \&quot;true\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;otpUpdated\&quot;);\n    expect(res.body).to.have.property(\&quot;otpSent\&quot;);\n    expect(res.body.otpUpdated).to.equal(true);\n    expect(res.body.otpSent).to.equal(true);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f8e7aac-d7cf-4295-bb1d-8a2dbf683d17&quot;,&quot;parentUUID&quot;:&quot;f4835cc1-ea9f-4473-8e07-fb0d19dd2c2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7f1c0c2-bf0f-4a34-a354-e520f253b962&quot;,&quot;cb7ff768-baca-438e-82b7-b6fb9f73fee1&quot;,&quot;9f8e7aac-d7cf-4295-bb1d-8a2dbf683d17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:150,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;d6bc9251-f2a8-49c9-be64-4554f4b70c3b&quot;,&quot;title&quot;:&quot;Gets&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\1_listener.js&quot;,&quot;file&quot;:&quot;\\test\\1_listener.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Listener Gets \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await Listener.findOne({ cell: \&quot;917428730894\&quot; });\nid = doc._id;\ntoken = jwt.sign({ id: doc._id }, process.env.JWT_SECRET);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa560df0-4a1a-4720-bd4f-1ec26bd50a35&quot;,&quot;parentUUID&quot;:&quot;d6bc9251-f2a8-49c9-be64-4554f4b70c3b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get multiple listeners&quot;,&quot;fullTitle&quot;:&quot;Listener Gets it should get multiple listeners&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(\&quot;/listener/get/all\&quot;)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;listenerDocs\&quot;);\n    expect(res.body.listenerDocs).to.be.an(\&quot;array\&quot;);\n    expect(res.body.listenerDocs).not.be.empty;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abd42647-5e28-4665-85d6-775a9230a331&quot;,&quot;parentUUID&quot;:&quot;d6bc9251-f2a8-49c9-be64-4554f4b70c3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a single listener&quot;,&quot;fullTitle&quot;:&quot;Listener Gets it should get a single listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/listener/get/single/${id}`)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;listenerDoc\&quot;);\n    expect(res.body.listenerDoc).to.be.an(\&quot;object\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a1b29ac-1202-4859-bf11-965bdc4113e6&quot;,&quot;parentUUID&quot;:&quot;d6bc9251-f2a8-49c9-be64-4554f4b70c3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a single username&quot;,&quot;fullTitle&quot;:&quot;Listener Gets it should get a single username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/listener/get/username`)\n  .set(\&quot;x-auth-token-listener\&quot;, token)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;userName\&quot;);\n    expect(res.body.userName).to.be.a(\&quot;String\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9b5cf77-2994-4ec0-9595-fc92ec71c971&quot;,&quot;parentUUID&quot;:&quot;d6bc9251-f2a8-49c9-be64-4554f4b70c3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abd42647-5e28-4665-85d6-775a9230a331&quot;,&quot;2a1b29ac-1202-4859-bf11-965bdc4113e6&quot;,&quot;d9b5cf77-2994-4ec0-9595-fc92ec71c971&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;a331877f-36fc-46f9-9c7d-67681491cd36&quot;,&quot;title&quot;:&quot;Set status&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\1_listener.js&quot;,&quot;file&quot;:&quot;\\test\\1_listener.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should set listener status&quot;,&quot;fullTitle&quot;:&quot;Listener Set status it should set listener status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/listener/set/status\&quot;)\n  .set(\&quot;x-auth-token-listener\&quot;, token)\n  .send({ status: \&quot;true\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;isOnline\&quot;);\n    expect(res.body.isOnline).to.equal(true);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c50968aa-c8b0-49e9-85f4-a64edd220e22&quot;,&quot;parentUUID&quot;:&quot;a331877f-36fc-46f9-9c7d-67681491cd36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c50968aa-c8b0-49e9-85f4-a64edd220e22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;d28f4806-9230-43d1-9c12-a2a7d4e424e6&quot;,&quot;title&quot;:&quot;401 test&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\1_listener.js&quot;,&quot;file&quot;:&quot;\\test\\1_listener.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get a 401 for username&quot;,&quot;fullTitle&quot;:&quot;Listener 401 test it should get a 401 for username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/listener/register\&quot;)\n  .send({\n    userName: \&quot;Test\&quot;,\n    email: \&quot;madsdsdmadklashinkov@gmail.com\&quot;,\n    categories: [\&quot;1sds1\&quot;, \&quot;1123\&quot;],\n    number: \&quot;+918555254822\&quot;,\n    test: \&quot;true\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(401);\n    expect(res.body).to.have.property(\&quot;isSame\&quot;);\n    expect(res.body.isSame).to.equal(\&quot;userName\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3db9c734-c9c1-491c-820c-12a11d0a9b32&quot;,&quot;parentUUID&quot;:&quot;d28f4806-9230-43d1-9c12-a2a7d4e424e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a 401 for email&quot;,&quot;fullTitle&quot;:&quot;Listener 401 test it should get a 401 for email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/listener/register\&quot;)\n  .send({\n    userName: \&quot;Tefsfst\&quot;,\n    email: \&quot;mamadklashinkov@gmail.com\&quot;,\n    categories: [\&quot;1sds1\&quot;, \&quot;1123\&quot;],\n    number: \&quot;+918555254822\&quot;,\n    test: \&quot;true\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(401);\n    expect(res.body).to.have.property(\&quot;isSame\&quot;);\n    expect(res.body.isSame).to.equal(\&quot;email\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e86125bd-2ffa-4868-96b5-878e17ca0fd1&quot;,&quot;parentUUID&quot;:&quot;d28f4806-9230-43d1-9c12-a2a7d4e424e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a 401 for number&quot;,&quot;fullTitle&quot;:&quot;Listener 401 test it should get a 401 for number&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/listener/register\&quot;)\n  .send({\n    userName: \&quot;Tefst\&quot;,\n    email: \&quot;mamadklashinkhhov@gmail.com\&quot;,\n    categories: [\&quot;1sds1\&quot;, \&quot;1123\&quot;],\n    number: \&quot;+917428730894\&quot;,\n    test: \&quot;true\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(401);\n    expect(res.body).to.have.property(\&quot;isSame\&quot;);\n    expect(res.body.isSame).to.equal(\&quot;number\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64d7538b-2eaa-4eb0-ae42-4fd1dc1515fd&quot;,&quot;parentUUID&quot;:&quot;d28f4806-9230-43d1-9c12-a2a7d4e424e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3db9c734-c9c1-491c-820c-12a11d0a9b32&quot;,&quot;e86125bd-2ffa-4868-96b5-878e17ca0fd1&quot;,&quot;64d7538b-2eaa-4eb0-ae42-4fd1dc1515fd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:51,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;691a507f-ce1d-4f6a-ae8c-d1e9d1ac5ebd&quot;,&quot;title&quot;:&quot;404s&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\1_listener.js&quot;,&quot;file&quot;:&quot;\\test\\1_listener.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Listener 404s \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Listener.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c34d9f60-7d59-4724-bb4c-02a7fb113f01&quot;,&quot;parentUUID&quot;:&quot;691a507f-ce1d-4f6a-ae8c-d1e9d1ac5ebd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get 404 for getting all the listeners&quot;,&quot;fullTitle&quot;:&quot;Listener 404s it should get 404 for getting all the listeners&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(\&quot;/listener/get/all\&quot;)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noListenerFound\&quot;);\n    expect(res.body.noListenerFound).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bc82bc2-4f3f-48a6-8590-cb94604e74b6&quot;,&quot;parentUUID&quot;:&quot;691a507f-ce1d-4f6a-ae8c-d1e9d1ac5ebd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get 404 for a single listener&quot;,&quot;fullTitle&quot;:&quot;Listener 404s it should get 404 for a single listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/listener/get/single/${id}`)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noListenerDoc\&quot;);\n    expect(res.body.noListenerDoc).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;414c329b-1c80-4ca9-b2e2-b00b38986598&quot;,&quot;parentUUID&quot;:&quot;691a507f-ce1d-4f6a-ae8c-d1e9d1ac5ebd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a single username&quot;,&quot;fullTitle&quot;:&quot;Listener 404s it should get a single username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/listener/get/username`)\n  .set(\&quot;x-auth-token-listener\&quot;, token)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noListenerDoc\&quot;);\n    expect(res.body.noListenerDoc).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae90f344-75aa-4a5d-ad4d-379183bcba38&quot;,&quot;parentUUID&quot;:&quot;691a507f-ce1d-4f6a-ae8c-d1e9d1ac5ebd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4bc82bc2-4f3f-48a6-8590-cb94604e74b6&quot;,&quot;414c329b-1c80-4ca9-b2e2-b00b38986598&quot;,&quot;ae90f344-75aa-4a5d-ad4d-379183bcba38&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;3b7909a0-6afb-412f-a78d-565cf0bae430&quot;,&quot;title&quot;:&quot;Session&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\2_pairing.js&quot;,&quot;file&quot;:&quot;\\test\\2_pairing.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;Pairing.deleteMany({});\nListener.deleteMany({});\nconst listenerOne = new Listener({\n  \&quot;approvalStatus.approved\&quot;: true,\n  emailVerified: true,\n  cellActivated: true,\n  email: \&quot;test1@test.com\&quot;,\n  categories: [\&quot;TestCat1\&quot;, \&quot;TestCat2\&quot;],\n  userName: \&quot;Test1\&quot;,\n  \&quot;status.online\&quot;: true,\n});\nconst listenerTwo = new Listener({\n  \&quot;approvalStatus.approved\&quot;: true,\n  emailVerified: true,\n  cellActivated: true,\n  email: \&quot;test2@test.com\&quot;,\n  categories: [\&quot;TestCat3\&quot;, \&quot;TestCat2\&quot;],\n  userName: \&quot;Test2\&quot;,\n  \&quot;status.currentEngagedSession\&quot;: \&quot;None\&quot;,\n  \&quot;status.online\&quot;: false,\n});\nlistenerOne.save().then((listenerDocOne) =&gt; {\n  listenerTwo.save().then((listenerDocTwo) =&gt; {\n    idOne = listenerDocOne._id;\n    idTwo = listenerDocTwo._id;\n    tokenOne = jwt.sign({ id: idOne }, process.env.JWT_SECRET);\n    tokenTwo = jwt.sign({ id: idTwo }, process.env.JWT_SECRET);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f9c5bc6-6f58-4414-b800-85119de70ffc&quot;,&quot;parentUUID&quot;:&quot;3b7909a0-6afb-412f-a78d-565cf0bae430&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b2a89a06-493b-4069-894b-babec8f2bc88&quot;,&quot;title&quot;:&quot;Pairing Start&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\2_pairing.js&quot;,&quot;file&quot;:&quot;\\test\\2_pairing.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should pair between a listener and a seeker&quot;,&quot;fullTitle&quot;:&quot;Session Pairing Start it should pair between a listener and a seeker&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/session/pairup/randomly\&quot;)\n  .send({ seekerNumber: \&quot;+989385130604\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    console.log(res.body);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;presentedListeners\&quot;);\n    expect(res.body).to.have.property(\&quot;sessionDoc\&quot;);\n    expect(res.body.presentedListeners).to.be.an(\&quot;array\&quot;);\n    expect(res.body.presentedListeners).not.be.empty;\n    expect(res.body.sessionDoc).to.be.an(\&quot;object\&quot;);\n    expect(res.body.presentedListeners).to.include(idOne.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5b548bc-d959-4059-983e-0383692cbade&quot;,&quot;parentUUID&quot;:&quot;b2a89a06-493b-4069-894b-babec8f2bc88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should pair between a listener and a seeker based on categories&quot;,&quot;fullTitle&quot;:&quot;Session Pairing Start it should pair between a listener and a seeker based on categories&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/session/pairup/category\&quot;)\n  .send({ seekerNumber: \&quot;+989385130604\&quot;, categories: [\&quot;TestCat2\&quot;] })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;presentedListeners\&quot;);\n    expect(res.body).to.have.property(\&quot;sessionDoc\&quot;);\n    expect(res.body.presentedListeners).to.be.an(\&quot;array\&quot;);\n    expect(res.body.presentedListeners).not.be.empty;\n    expect(res.body.sessionDoc).to.be.an(\&quot;object\&quot;);\n    expect(res.body.presentedListeners).to.include(idOne.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12d9705f-e61f-4577-8103-61094a9cae40&quot;,&quot;parentUUID&quot;:&quot;b2a89a06-493b-4069-894b-babec8f2bc88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5b548bc-d959-4059-983e-0383692cbade&quot;,&quot;12d9705f-e61f-4577-8103-61094a9cae40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;b3c5f7f9-e33c-412f-94c8-3529e9c581d0&quot;,&quot;title&quot;:&quot;Pairing accept/disconnect&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\2_pairing.js&quot;,&quot;file&quot;:&quot;\\test\\2_pairing.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Pairing accept/disconnect \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const session = await Pairing.find({});\nsessionId = session[0]._id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d74e2c4-3f04-4dbf-b9a5-1811ea3c58be&quot;,&quot;parentUUID&quot;:&quot;b3c5f7f9-e33c-412f-94c8-3529e9c581d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should accept the session&quot;,&quot;fullTitle&quot;:&quot;Session Pairing accept/disconnect it should accept the session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(`/session/accept/${sessionId}`)\n  .set(\&quot;x-auth-token-listener\&quot;, tokenOne)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;tokens\&quot;);\n    expect(res.body).to.have.property(\&quot;nicks\&quot;);\n    expect(res.body).to.have.property(\&quot;listenerId\&quot;);\n    expect(res.body).to.have.property(\&quot;sessionDoc\&quot;);\n    expect(res.body.tokens).to.be.an(\&quot;object\&quot;);\n    expect(res.body.nicks).to.be.an(\&quot;object\&quot;);\n    expect(res.body.listenerId).to.equal(idOne.toString());\n    expect(res.body.sessionDoc._id).to.equal(sessionId.toString());\n    expect(res.body.sessionDoc.listenerId).to.equal(idOne.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db1b4044-8991-43ec-9154-3d9b6aea372c&quot;,&quot;parentUUID&quot;:&quot;b3c5f7f9-e33c-412f-94c8-3529e9c581d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should end the session&quot;,&quot;fullTitle&quot;:&quot;Session Pairing accept/disconnect it should end the session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(`/session/disconnect/${sessionId}`)\n  .set(\&quot;x-auth-token-listener\&quot;, tokenOne)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;disconnected\&quot;);\n    expect(res.body.disconnected).to.be.an(\&quot;boolean\&quot;);\n    expect(res.body.disconnected).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;065e61e7-da8f-4d2e-a274-b9517a7e57db&quot;,&quot;parentUUID&quot;:&quot;b3c5f7f9-e33c-412f-94c8-3529e9c581d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;db1b4044-8991-43ec-9154-3d9b6aea372c&quot;,&quot;065e61e7-da8f-4d2e-a274-b9517a7e57db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;efffed69-553a-46ee-826d-5674f2207d06&quot;,&quot;title&quot;:&quot;Reports&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\2_pairing.js&quot;,&quot;file&quot;:&quot;\\test\\2_pairing.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Reports \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;numberToken = jwt.sign(\n  { number: helpers.popNumber(\&quot;+989385130604\&quot;) },\n  process.env.JWT_SECRET\n);\ndone();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e4925ea-f718-47cc-954c-bc92dd1d7541&quot;,&quot;parentUUID&quot;:&quot;efffed69-553a-46ee-826d-5674f2207d06&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should report the listener&quot;,&quot;fullTitle&quot;:&quot;Session Reports it should report the listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(`/session/report/by/seeker/${sessionId}`)\n  .set(\&quot;x-auth-token-seeker\&quot;, numberToken)\n  .send({ listenerId: idOne })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;reported\&quot;);\n    expect(res.body.reported).to.be.an(\&quot;boolean\&quot;);\n    expect(res.body.reported).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d8d4894-527d-4d6a-b8ab-7eb1bbfe5277&quot;,&quot;parentUUID&quot;:&quot;efffed69-553a-46ee-826d-5674f2207d06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should report the seeker&quot;,&quot;fullTitle&quot;:&quot;Session Reports it should report the seeker&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(`/session/report/by/listener/${sessionId}`)\n  .set(\&quot;x-auth-token-listener\&quot;, tokenOne)\n  .send({ seekerNumber: \&quot;+989385130604\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;reported\&quot;);\n    expect(res.body.reported).to.be.an(\&quot;boolean\&quot;);\n    expect(res.body.reported).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9280ae3-1332-4ce1-8fae-300f8600e87d&quot;,&quot;parentUUID&quot;:&quot;efffed69-553a-46ee-826d-5674f2207d06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d8d4894-527d-4d6a-b8ab-7eb1bbfe5277&quot;,&quot;d9280ae3-1332-4ce1-8fae-300f8600e87d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;259ff4bc-c558-45b9-89ca-74f5e405cc59&quot;,&quot;title&quot;:&quot;Gets&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\2_pairing.js&quot;,&quot;file&quot;:&quot;\\test\\2_pairing.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get all the sessions&quot;,&quot;fullTitle&quot;:&quot;Session Gets it should get all the sessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/session/get/all`)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;sessionDocs\&quot;);\n    expect(res.body.sessionDocs).to.be.an(\&quot;array\&quot;);\n    expect(res.body.sessionDocs).not.be.empty;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95210748-02cc-4161-a19e-6a6c1b186011&quot;,&quot;parentUUID&quot;:&quot;259ff4bc-c558-45b9-89ca-74f5e405cc59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get all the sessions&quot;,&quot;fullTitle&quot;:&quot;Session Gets it should get all the sessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/session/get/single/${sessionId}`)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;sessionDoc\&quot;);\n    expect(res.body.sessionDoc).to.be.an(\&quot;object\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;561dd57a-87af-4e14-8209-b0318636b872&quot;,&quot;parentUUID&quot;:&quot;259ff4bc-c558-45b9-89ca-74f5e405cc59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;919c32fa-8989-4900-84c3-4c736f1108b7&quot;,&quot;title&quot;:&quot;Gets 404&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\2_pairing.js&quot;,&quot;file&quot;:&quot;\\test\\2_pairing.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Gets Gets 404 \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Pairing.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06fadb62-7752-4242-9731-543215cad8ad&quot;,&quot;parentUUID&quot;:&quot;919c32fa-8989-4900-84c3-4c736f1108b7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get all the sessions 404&quot;,&quot;fullTitle&quot;:&quot;Session Gets Gets 404 it should get all the sessions 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/session/get/all`)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noSessionFound\&quot;);\n    expect(res.body.noSessionFound).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66655925-e973-4ba0-8a84-028776a1862d&quot;,&quot;parentUUID&quot;:&quot;919c32fa-8989-4900-84c3-4c736f1108b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a single session 404&quot;,&quot;fullTitle&quot;:&quot;Session Gets Gets 404 it should get a single session 404&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/session/get/single/${sessionId}`)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noSessionFound\&quot;);\n    expect(res.body.noSessionFound).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;768dcdeb-db6f-4f9e-abaf-bcbbb22d92ed&quot;,&quot;parentUUID&quot;:&quot;919c32fa-8989-4900-84c3-4c736f1108b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66655925-e973-4ba0-8a84-028776a1862d&quot;,&quot;768dcdeb-db6f-4f9e-abaf-bcbbb22d92ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[&quot;95210748-02cc-4161-a19e-6a6c1b186011&quot;,&quot;561dd57a-87af-4e14-8209-b0318636b872&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;394c00a9-c30c-42b5-a8f9-63a62cd93e6f&quot;,&quot;title&quot;:&quot;SuperAdmin&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Admin.deleteMany({});\nawait Listener.deleteMany({});\nawait SuperAdmin.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;579e3214-9512-425d-9418-0329723b87c4&quot;,&quot;parentUUID&quot;:&quot;394c00a9-c30c-42b5-a8f9-63a62cd93e6f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;508e0c6b-7087-4471-9306-47ef946c15ab&quot;,&quot;title&quot;:&quot;Create Super Admin&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should create a superAdmin&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Create Super Admin it should create a superAdmin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:311,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/create\&quot;)\n  .send({\n    userName: \&quot;To\&quot;,\n    password: \&quot;Kill\&quot;,\n    email: \&quot;A@mockingbird.com\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;superAdminCreated\&quot;);\n    expect(res.body.superAdminCreated).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83bb5f3e-a68b-4412-98da-5e118c1a1784&quot;,&quot;parentUUID&quot;:&quot;508e0c6b-7087-4471-9306-47ef946c15ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should create a superAdmin but throw a 403 because it exists&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Create Super Admin it should create a superAdmin but throw a 403 because it exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/create\&quot;)\n  .send({\n    userName: \&quot;To\&quot;,\n    password: \&quot;Kill\&quot;,\n    email: \&quot;A@mockingbird.com\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(403);\n    expect(res.body).to.have.property(\&quot;superAdminExists\&quot;);\n    expect(res.body.superAdminExists).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26f48192-bc1a-43b8-98ee-acae4144db6e&quot;,&quot;parentUUID&quot;:&quot;508e0c6b-7087-4471-9306-47ef946c15ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83bb5f3e-a68b-4412-98da-5e118c1a1784&quot;,&quot;26f48192-bc1a-43b8-98ee-acae4144db6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:315,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;41c12691-5c5c-4bb8-b095-512619f8528b&quot;,&quot;title&quot;:&quot;superAdminAuth&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin superAdminAuth \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const doc = await SuperAdmin.find({});\nid = doc[0]._id;\ntoken = jwt.sign({ id: id }, process.env.JWT_SECRET);\ntokenPk = token.split(\&quot;.\&quot;)[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83fa38ad-dc25-45da-b7c1-e4a7a90bbddb&quot;,&quot;parentUUID&quot;:&quot;41c12691-5c5c-4bb8-b095-512619f8528b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should auth superAdmin with username&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin superAdminAuth it should auth superAdmin with username&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/auth\&quot;)\n  .send({\n    userName: \&quot;To\&quot;,\n    password: \&quot;Kill\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    expect(res.body).to.have.property(\&quot;superDoc\&quot;);\n    expect(res.body.token.split(\&quot;.\&quot;)[0]).to.equal(tokenPk.toString());\n    expect(res.body.superDoc._id).to.equal(id.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae55c23f-530c-4851-a6af-8dc5997db922&quot;,&quot;parentUUID&quot;:&quot;41c12691-5c5c-4bb8-b095-512619f8528b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should auth superAdmin with email&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin superAdminAuth it should auth superAdmin with email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/auth\&quot;)\n  .send({\n    email: \&quot;A@mockingbird.com\&quot;,\n    password: \&quot;Kill\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    expect(res.body).to.have.property(\&quot;superDoc\&quot;);\n    expect(res.body.token.split(\&quot;.\&quot;)[0]).to.equal(tokenPk.toString());\n    expect(res.body.superDoc._id).to.equal(id.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78ba6950-c0a7-486c-a7ab-e3d272817a00&quot;,&quot;parentUUID&quot;:&quot;41c12691-5c5c-4bb8-b095-512619f8528b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should auth superAdmin with both username email&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin superAdminAuth it should auth superAdmin with both username email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:304,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/auth\&quot;)\n  .send({\n    email: \&quot;A@mockingbird.com\&quot;,\n    password: \&quot;Kill\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    expect(res.body).to.have.property(\&quot;superDoc\&quot;);\n    expect(res.body.token.split(\&quot;.\&quot;)[0]).to.equal(tokenPk.toString());\n    expect(res.body.superDoc._id).to.equal(id.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2013b7fd-2fca-4f21-a956-44f7f1ecde4a&quot;,&quot;parentUUID&quot;:&quot;41c12691-5c5c-4bb8-b095-512619f8528b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae55c23f-530c-4851-a6af-8dc5997db922&quot;,&quot;78ba6950-c0a7-486c-a7ab-e3d272817a00&quot;,&quot;2013b7fd-2fca-4f21-a956-44f7f1ecde4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:917,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;cf981b2c-f6c4-4736-9d28-997ca9c4b29e&quot;,&quot;title&quot;:&quot;Superadmin Edit/Password Change&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should edit superadmin info&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Superadmin Edit/Password Change it should edit superadmin info&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/superAdmin/edit/info\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .send({\n    userName: \&quot;Hero\&quot;,\n    email: \&quot;zero@hero.com\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;superUpdated\&quot;);\n    expect(res.body.superUpdated).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60e6328b-a27b-482c-bc76-977cd24f61a2&quot;,&quot;parentUUID&quot;:&quot;cf981b2c-f6c4-4736-9d28-997ca9c4b29e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should change superadmin password&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Superadmin Edit/Password Change it should change superadmin password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:606,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/superAdmin/change/password\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .send({\n    oldPassword: \&quot;Kill\&quot;,\n    newPassword: \&quot;Bill\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;passwordChanged\&quot;);\n    expect(res.body.passwordChanged).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a64da88-2c0b-4c9a-8364-c009bb2434f6&quot;,&quot;parentUUID&quot;:&quot;cf981b2c-f6c4-4736-9d28-997ca9c4b29e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should auth superAdmin with new email and password&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Superadmin Edit/Password Change it should auth superAdmin with new email and password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/auth\&quot;)\n  .send({\n    email: \&quot;zero@hero.com\&quot;,\n    password: \&quot;Bill\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    expect(res.body).to.have.property(\&quot;superDoc\&quot;);\n    expect(res.body.token.split(\&quot;.\&quot;)[0]).to.equal(tokenPk.toString());\n    expect(res.body.superDoc._id).to.equal(id.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c988738d-cd0d-4877-b655-29c954e3f347&quot;,&quot;parentUUID&quot;:&quot;cf981b2c-f6c4-4736-9d28-997ca9c4b29e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60e6328b-a27b-482c-bc76-977cd24f61a2&quot;,&quot;3a64da88-2c0b-4c9a-8364-c009bb2434f6&quot;,&quot;c988738d-cd0d-4877-b655-29c954e3f347&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:917,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;00c30c10-e58f-428d-a477-4012c64022e9&quot;,&quot;title&quot;:&quot;Create admin&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should ceate an admin&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Create admin it should ceate an admin&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:321,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/create/admin\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .send({\n    adminUserName: \&quot;Kiram\&quot;,\n    adminEmail: \&quot;kiram@gmail.com\&quot;,\n    adminPassword: \&quot;T3stP4ssw0rd\&quot;,\n    adminNumber: \&quot;09385130604\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;adminCreated\&quot;);\n    expect(res.body.adminCreated).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ea77289-aa24-446e-a30c-25d68e2dece7&quot;,&quot;parentUUID&quot;:&quot;00c30c10-e58f-428d-a477-4012c64022e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get 401 because of adminUserName&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Create admin it should get 401 because of adminUserName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/create/admin\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .send({\n    adminUserName: \&quot;Kiram\&quot;,\n    adminEmail: \&quot;kiram@gmafil.com\&quot;,\n    adminPassword: \&quot;T3stP4ssw0rd\&quot;,\n    adminNumber: \&quot;0938513f0604\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(401);\n    expect(res.body).to.have.property(\&quot;isSame\&quot;);\n    expect(res.body.isSame).to.equal(\&quot;userName\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;752df30d-327b-46a2-9bf9-2fc87f082beb&quot;,&quot;parentUUID&quot;:&quot;00c30c10-e58f-428d-a477-4012c64022e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get 401 because of adminEmail&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Create admin it should get 401 because of adminEmail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/create/admin\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .send({\n    adminUserName: \&quot;Kiraml\&quot;,\n    adminEmail: \&quot;kiram@gmail.com\&quot;,\n    adminPassword: \&quot;T3stP4ssw0rd\&quot;,\n    adminNumber: \&quot;0938513j0604\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(401);\n    expect(res.body).to.have.property(\&quot;isSame\&quot;);\n    expect(res.body.isSame).to.equal(\&quot;email\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d51ab72-582e-46c7-87aa-1fa3bae4e154&quot;,&quot;parentUUID&quot;:&quot;00c30c10-e58f-428d-a477-4012c64022e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get 401 because of adminNumber&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Create admin it should get 401 because of adminNumber&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/superAdmin/create/admin\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .send({\n    adminUserName: \&quot;Kifram\&quot;,\n    adminEmail: \&quot;kiram@gmafil.com\&quot;,\n    adminPassword: \&quot;T3stP4ssw0rd\&quot;,\n    adminNumber: \&quot;09385130604\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(401);\n    expect(res.body).to.have.property(\&quot;isSame\&quot;);\n    expect(res.body.isSame).to.equal(\&quot;number\&quot;);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60dd5e4a-5b12-477f-9f98-763c29ec6fef&quot;,&quot;parentUUID&quot;:&quot;00c30c10-e58f-428d-a477-4012c64022e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ea77289-aa24-446e-a30c-25d68e2dece7&quot;,&quot;752df30d-327b-46a2-9bf9-2fc87f082beb&quot;,&quot;1d51ab72-582e-46c7-87aa-1fa3bae4e154&quot;,&quot;60dd5e4a-5b12-477f-9f98-763c29ec6fef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:356,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;f27ea8c5-ff88-403f-8b52-ad0c8cb269ac&quot;,&quot;title&quot;:&quot;Admin routes&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const admin = await Admin.findOne({ userName: \&quot;Kiram\&quot; });\nadminId = admin._id;\nadminToken = jwt.sign({ id: adminId }, process.env.JWT_SECRET);\nadminTokenPk = adminToken.split(\&quot;.\&quot;)[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc606a54-dd33-482d-b14a-aa9084f9032e&quot;,&quot;parentUUID&quot;:&quot;f27ea8c5-ff88-403f-8b52-ad0c8cb269ac&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3cffb15b-c561-4466-9e1e-d93d019ea75e&quot;,&quot;title&quot;:&quot;admin auth&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should authorize the admin using email&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes admin auth it should authorize the admin using email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:328,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/admin/auth\&quot;)\n  .send({\n    email: \&quot;kiram@gmail.com\&quot;,\n    password: \&quot;T3stP4ssw0rd\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    expect(res.body).to.have.property(\&quot;adminDoc\&quot;);\n    expect(res.body.token.split(\&quot;.\&quot;)[0]).to.equal(\n      adminTokenPk.toString()\n    );\n    console.log(\&quot;adminDoc\&quot;, res.body.adminDoc);\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0dac822-1685-4fc8-bc2e-d8bfc145a037&quot;,&quot;parentUUID&quot;:&quot;3cffb15b-c561-4466-9e1e-d93d019ea75e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0dac822-1685-4fc8-bc2e-d8bfc145a037&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:328,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;369c6c60-10aa-4a42-85b8-5f0a35c7b728&quot;,&quot;title&quot;:&quot;admin edit info&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes admin edit info \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const admins = await Admin.findOne({ _id: adminId });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59566a83-7dd2-4af3-9a8d-02ad86715ff1&quot;,&quot;parentUUID&quot;:&quot;369c6c60-10aa-4a42-85b8-5f0a35c7b728&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should edit admin info&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes admin edit info it should edit admin info&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/admin/edit/info\&quot;)\n  .set(\&quot;x-auth-token-admin\&quot;, adminToken)\n  .send({\n    userName: \&quot;Hero\&quot;,\n    phoneNumber: \&quot;+984234247\&quot;,\n    email: \&quot;kill@hellobill.com\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;adminEdited\&quot;);\n    expect(res.body.adminEdited).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aca99ba4-7353-451b-9ff1-664357eb5ef1&quot;,&quot;parentUUID&quot;:&quot;369c6c60-10aa-4a42-85b8-5f0a35c7b728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should change admin password&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes admin edit info it should change admin password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:617,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/admin/change/password\&quot;)\n  .set(\&quot;x-auth-token-admin\&quot;, adminToken)\n  .send({\n    oldPassword: \&quot;T3stP4ssw0rd\&quot;,\n    newPassword: \&quot;Th!rstyBr0th3rs\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;passwordChanged\&quot;);\n    expect(res.body.passwordChanged).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;692b1828-807a-4be9-8bb7-a8f192c0dead&quot;,&quot;parentUUID&quot;:&quot;369c6c60-10aa-4a42-85b8-5f0a35c7b728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should auth admin with new email and password&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes admin edit info it should auth admin with new email and password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:326,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/admin/auth\&quot;)\n  .send({\n    email: \&quot;kill@hellobill.com\&quot;,\n    password: \&quot;Th!rstyBr0th3rs\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;token\&quot;);\n    expect(res.body).to.have.property(\&quot;adminDoc\&quot;);\n    expect(res.body.token.split(\&quot;.\&quot;)[0]).to.equal(\n      adminTokenPk.toString()\n    );\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;494d5ae5-4cf1-4ad8-94b0-e6282eeaa530&quot;,&quot;parentUUID&quot;:&quot;369c6c60-10aa-4a42-85b8-5f0a35c7b728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aca99ba4-7353-451b-9ff1-664357eb5ef1&quot;,&quot;692b1828-807a-4be9-8bb7-a8f192c0dead&quot;,&quot;494d5ae5-4cf1-4ad8-94b0-e6282eeaa530&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:960,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;b2838b98-6258-481e-a357-10926bb770d1&quot;,&quot;title&quot;:&quot;approve/ban listener&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes approve/ban listener \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;banDate = new Date();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b840a652-c446-425b-afd8-6ed5f072e5fb&quot;,&quot;parentUUID&quot;:&quot;b2838b98-6258-481e-a357-10926bb770d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes approve/ban listener \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const listener = new Listener({\n  userName: \&quot;Hiram\&quot;,\n  email: \&quot;hiram@goldman.com\&quot;,\n  \&quot;otp.password\&quot;: \&quot;1254\&quot;,\n  \&quot;otp.creationHour\&quot;: new Date()\n    .toISOString()\n    .substr(11, 5)\n    .replace(\&quot;:\&quot;, \&quot;\&quot;),\n  cell: \&quot;+919655550189 \&quot;,\n  categories: [\&quot;Killing\&quot;, \&quot;Disembowling\&quot;],\n  emailVerificationCode: \&quot;1121\&quot;,\n});\nconst listenerDoc = await listener.save();\nlistenerId = listenerDoc._id;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91e85ccb-31dd-41f4-ba85-595a545404e7&quot;,&quot;parentUUID&quot;:&quot;b2838b98-6258-481e-a357-10926bb770d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should approve the listener&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes approve/ban listener it should approve the listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(`/admin/set/approval/${listenerId}`)\n  .set(\&quot;x-auth-token-admin\&quot;, adminToken)\n  .send({\n    approval: \&quot;true\&quot;,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;isApproved\&quot;);\n    expect(res.body.isApproved).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13061200-a0a1-45da-8397-71d7b3cf0e78&quot;,&quot;parentUUID&quot;:&quot;b2838b98-6258-481e-a357-10926bb770d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should ban the listener&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes approve/ban listener it should ban the listener&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(`/admin/ban/${listenerId}`)\n  .set(\&quot;x-auth-token-admin\&quot;, adminToken)\n  .send({\n    endDate: banDate,\n  })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;listenerBanned\&quot;);\n    expect(res.body.listenerBanned).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60ed4ed2-7b11-49f8-8b17-4b15c0d8e3b2&quot;,&quot;parentUUID&quot;:&quot;b2838b98-6258-481e-a357-10926bb770d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should reaffirm listener ban and approval&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes approve/ban listener it should reaffirm listener ban and approval&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const listenerDoc = await Listener.findOne({ _id: listenerId });\nexpect(\n  listenerDoc.bannedStatus.expireDate.toISOString().split(\&quot;.\&quot;)[0]\n).to.equal(banDate.toISOString().split(\&quot;.\&quot;)[0]);\nexpect(listenerDoc.approvalStatus.approved).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e7b14d0-0c85-42e7-a7ff-8265f3bd93a9&quot;,&quot;parentUUID&quot;:&quot;b2838b98-6258-481e-a357-10926bb770d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13061200-a0a1-45da-8397-71d7b3cf0e78&quot;,&quot;60ed4ed2-7b11-49f8-8b17-4b15c0d8e3b2&quot;,&quot;5e7b14d0-0c85-42e7-a7ff-8265f3bd93a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:48,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;799c06b3-33a0-40e6-b65f-04d3e60ae22d&quot;,&quot;title&quot;:&quot;Admin gets&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get all the admins&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes Admin gets it should get all the admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(\&quot;/admin/get/all\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;adminDocs\&quot;);\n    expect(res.body.adminDocs).to.be.an(\&quot;array\&quot;);\n    expect(res.body.adminDocs).not.be.empty;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7f59bc9-4bf2-4446-8d56-72a3ad65a969&quot;,&quot;parentUUID&quot;:&quot;799c06b3-33a0-40e6-b65f-04d3e60ae22d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get a single admins&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes Admin gets it should get a single admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/admin/get/single/${adminId}`)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;adminDoc\&quot;);\n    expect(res.body.adminDoc).to.be.an(\&quot;object\&quot;);\n    expect(res.body.adminDoc).not.be.null;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49243fa2-3d43-4d03-be52-43f0f54dce0e&quot;,&quot;parentUUID&quot;:&quot;799c06b3-33a0-40e6-b65f-04d3e60ae22d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7f59bc9-4bf2-4446-8d56-72a3ad65a969&quot;,&quot;49243fa2-3d43-4d03-be52-43f0f54dce0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;1099c9e7-8aac-4843-b0f7-bff102eaac4e&quot;,&quot;title&quot;:&quot;Admin 404s&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\3_admin.js&quot;,&quot;file&quot;:&quot;\\test\\3_admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes Admin 404s \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await Listener.deleteMany({});\nawait Admin.deleteMany({});\nawait SuperAdmin.deleteMany({});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;128b7a47-bedf-4424-b200-88f64d265ff1&quot;,&quot;parentUUID&quot;:&quot;1099c9e7-8aac-4843-b0f7-bff102eaac4e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should get 404 for all the admins&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes Admin 404s it should get 404 for all the admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(\&quot;/admin/get/all\&quot;)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noAdminFound\&quot;);\n    expect(res.body.noAdminFound).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88817fbb-3b30-4caa-b9bb-c652f6135ae9&quot;,&quot;parentUUID&quot;:&quot;1099c9e7-8aac-4843-b0f7-bff102eaac4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should get 404 for a single admins&quot;,&quot;fullTitle&quot;:&quot;SuperAdmin Admin routes Admin 404s it should get 404 for a single admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .get(`/admin/get/single/${adminId}`)\n  .set(\&quot;x-auth-token-super\&quot;, token)\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(404);\n    expect(res.body).to.have.property(\&quot;noAdmin\&quot;);\n    expect(res.body.noAdmin).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7772e125-595a-487c-9974-6f01a1b03c4b&quot;,&quot;parentUUID&quot;:&quot;1099c9e7-8aac-4843-b0f7-bff102eaac4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88817fbb-3b30-4caa-b9bb-c652f6135ae9&quot;,&quot;7772e125-595a-487c-9974-6f01a1b03c4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000},{&quot;uuid&quot;:&quot;543be169-b9a9-48b3-8cfe-bd26daa7c394&quot;,&quot;title&quot;:&quot;Blocked Numbers&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\4_blockedNumbers.js&quot;,&quot;file&quot;:&quot;\\test\\4_blockedNumbers.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Blocked Numbers \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await BlockedNumbers.deleteMany({});\nawait Admin.deleteMany({});\nawait Listener.deleteMany({});\nconst admin = new Admin({\n  userName: \&quot;Heru Kasagi\&quot;,\n  email: \&quot;hero@kasagi.com\&quot;,\n  phoneNumber: \&quot;09324232\&quot;,\n  password: \&quot;lfsdf\&quot;,\n});\nconst adminDoc = await admin.save();\nadminToken = jwt.sign({ id: adminDoc._id }, process.env.JWT_SECRET);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;017ead54-e4ae-4446-8470-6b8c23d89813&quot;,&quot;parentUUID&quot;:&quot;543be169-b9a9-48b3-8cfe-bd26daa7c394&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Blocked Numbers \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const listenerOne = new Listener({\n  \&quot;approvalStatus.approved\&quot;: true,\n  emailVerified: true,\n  cellActivated: true,\n  email: \&quot;test1@test.com\&quot;,\n  categories: [\&quot;TestCat1\&quot;, \&quot;TestCat2\&quot;],\n  userName: \&quot;Test1\&quot;,\n  \&quot;status.online\&quot;: true,\n});\nconst listenerTwo = new Listener({\n  \&quot;approvalStatus.approved\&quot;: true,\n  emailVerified: true,\n  cellActivated: true,\n  email: \&quot;test2@test.com\&quot;,\n  categories: [\&quot;TestCat3\&quot;, \&quot;TestCat2\&quot;],\n  userName: \&quot;Test2\&quot;,\n  \&quot;status.currentEngagedSession\&quot;: \&quot;None\&quot;,\n  \&quot;status.online\&quot;: false,\n});\nlistenerOne.save().then((listenerDocOne) =&gt; {\n  listenerTwo.save().then((listenerDocTwo) =&gt; {\n    idOne = listenerDocOne._id;\n    idTwo = listenerDocTwo._id;\n    tokenOne = jwt.sign({ id: idOne }, process.env.JWT_SECRET);\n    tokenTwo = jwt.sign({ id: idTwo }, process.env.JWT_SECRET);\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2a013c2-c350-4940-911b-e54edb2e7f91&quot;,&quot;parentUUID&quot;:&quot;543be169-b9a9-48b3-8cfe-bd26daa7c394&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;759bc1f2-7dc2-4bf8-832c-27f5fcbb973d&quot;,&quot;title&quot;:&quot;blockign the number&quot;,&quot;fullFile&quot;:&quot;D:\\247buddy\\backend\\test\\4_blockedNumbers.js&quot;,&quot;file&quot;:&quot;\\test\\4_blockedNumbers.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should block the number&quot;,&quot;fullTitle&quot;:&quot;Blocked Numbers blockign the number it should block the number&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/blocked/block\&quot;)\n  .set(\&quot;x-auth-token-admin\&quot;, adminToken)\n  .send({ number: \&quot;+9385130604\&quot;, reportMessage: \&quot;bothering girls\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body.numberBlocked).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3633e0f8-a1e9-47e7-9076-1e0b517696f6&quot;,&quot;parentUUID&quot;:&quot;759bc1f2-7dc2-4bf8-832c-27f5fcbb973d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should not be able to pair up&quot;,&quot;fullTitle&quot;:&quot;Blocked Numbers blockign the number it should not be able to pair up&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/session/pairup/randomly\&quot;)\n  .send({ seekerNumber: \&quot;+9385130604\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    console.log(res.body);\n    expect(res).to.have.status(403);\n    expect(res.body).to.have.property(\&quot;numberBlocked\&quot;);\n    expect(res.body.numberBlocked).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15a16a3d-00c7-4d51-881e-fc902c83303f&quot;,&quot;parentUUID&quot;:&quot;759bc1f2-7dc2-4bf8-832c-27f5fcbb973d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should unbblock the number&quot;,&quot;fullTitle&quot;:&quot;Blocked Numbers blockign the number it should unbblock the number&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .put(\&quot;/blocked/unblock\&quot;)\n  .set(\&quot;x-auth-token-admin\&quot;, adminToken)\n  .send({ number: \&quot;+9385130604\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    expect(res).to.have.status(200);\n    expect(res.body.numberUnblocked).to.be.true;\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bc455f0-f424-4e4a-82b1-e1aebc38e245&quot;,&quot;parentUUID&quot;:&quot;759bc1f2-7dc2-4bf8-832c-27f5fcbb973d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should be able to pair up&quot;,&quot;fullTitle&quot;:&quot;Blocked Numbers blockign the number it should be able to pair up&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;chai\n  .request(server)\n  .post(\&quot;/session/pairup/randomly\&quot;)\n  .send({ seekerNumber: \&quot;+9385130604\&quot; })\n  .end((err, res) =&gt; {\n    if (err) done(err);\n    console.log(res.body);\n    expect(res).to.have.status(200);\n    expect(res.body).to.have.property(\&quot;presentedListeners\&quot;);\n    expect(res.body).to.have.property(\&quot;sessionDoc\&quot;);\n    expect(res.body.presentedListeners).to.be.an(\&quot;array\&quot;);\n    expect(res.body.presentedListeners).not.be.empty;\n    expect(res.body.sessionDoc).to.be.an(\&quot;object\&quot;);\n    expect(res.body.presentedListeners).to.include(idOne.toString());\n    done();\n  });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;043d6181-bccf-4e6c-951d-7d7f0f0b9954&quot;,&quot;parentUUID&quot;:&quot;759bc1f2-7dc2-4bf8-832c-27f5fcbb973d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3633e0f8-a1e9-47e7-9076-1e0b517696f6&quot;,&quot;15a16a3d-00c7-4d51-881e-fc902c83303f&quot;,&quot;9bc455f0-f424-4e4a-82b1-e1aebc38e245&quot;,&quot;043d6181-bccf-4e6c-951d-7d7f0f0b9954&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:50000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:50000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.1.2&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;backend&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report\\assets&quot;,&quot;jsonFile&quot;:&quot;D:\\247buddy\\backend\\mochawesome-report\\mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;D:\\247buddy\\backend\\mochawesome-report\\mochawesome.html&quot;}"><div id="report"></div><script src="assets\app.js"></script></body></html>